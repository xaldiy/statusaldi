<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>üü¢ Aldi - Luzoryx</title>
  <style>
    body {
      font-family: sans-serif;
      background: #111;
      color: #eee;
      padding: 2rem;
    }
    .status-box {
      background: #1c1c1c;
      border-radius: 8px;
      padding: 1rem;
      max-width: 600px;
      margin: auto;
    }
    .site {
      display: flex;
      justify-content: space-between;
      padding: 6px 0;
      border-bottom: 1px solid #333;
    }
    .status {
      font-weight: bold;
    }
    .checking { color: #888; }
    .up { color: #00ff66; }
    .down { color: #ff4444; }
    .dev { color: #ffc107; }
    .recovery { color: #ffff66; }
    .backend { color: #ff8800; }
    .closed { color: #ff5555; }
    .tempclosed { color: #ffa500; }
    .sleep { color: #00bfff; }
    .private { color: #bbb; font-style: italic; }
  </style>
</head>
<body>
  <div class="status-box" id="statusList">
    <h2>&lt;!&gt;Aldi Status&lt;/&gt;üåê</h2>
  </div>

  <script>
    const container = document.getElementById('statusList');

    // List domain tetap ditulis di frontend agar langsung tampil dulu
    const domainList = [
      'aldi.my.id', 'aldi.setiadi.lat', 'moviepage.miaw.my.id',
      'trailify.zone.id', 'luzoryx.aldi.my.id', 'sezoryx.aldi.my.id',
      'ke.aldi.my.id', 'dila.zone.id', 'aldi.zone.id', 'aldi.mine.bz',
      'dila.mine.bz', 'aldi.qzz.io', 'aldi.minecraft.pe', 'aldi.kitty.to',
      'aldi.home.kg', 'aldi.ftp.sh', 'aldi.info.gf', 'mbti.zone.id',
      'infp.ix.tc', 'isfp.ix.tc', 'blog.setiadi.lat', 'ask.aldi.my.id',
      'ff-uid.aldi.my.id', 'nobar.aldi.my.id', 'sharequotes.aldi.my.id',
      'aldi.setiadiputra.my.id', 'aldisetiadiputra.rf.gd', 'rentry.co/aldi',
      'aldisetiadiputra.blogspot.com', 'quotes.aldi.my.id',
      'pelukdulu.zone.id', 'hp.aldi.my.id', 'end.aldi.my.id',
      'arkaldius.aldi.my.id'
    ];

    const customStatuses = {
      'dev': { label: 'üöß Under Dev', class: 'dev' },
      'recovery': { label: 'üü° Recovery', class: 'recovery' },
      'backend': { label: '‚ö†Ô∏è Backend Down', class: 'backend' },
      'closed': { label: '‚ùå Permanently Closed', class: 'closed' },
      'tempclosed': { label: '‚õî Temporary Closed', class: 'tempclosed' },
      'sleep': { label: 'üí§ Sleep', class: 'sleep' },
      'private': { label: 'üîí Private', class: 'private' }
    };

    // Render awal: semua status 'Checking...'
    const renderInitialList = () => {
      domainList.forEach(domain => {
        const div = document.createElement('div');
        div.className = 'site';
        div.id = `site-${btoa(domain).replace(/=/g, '')}`; // Unique ID dari domain
        div.innerHTML = `
          <span>${domain}</span>
          <span class="status checking">‚è≥ Checking...</span>
        `;
        container.appendChild(div);
      });
    };

    // Update status setelah fetch
    const updateStatuses = async () => {
      try {
        const res = await fetch("https://aldi.my.id/bcknd/statusaldi.php");
        const data = await res.json();

        for (const [domain, info] of Object.entries(data)) {
          const id = `site-${btoa(domain).replace(/=/g, '')}`;
          const row = document.getElementById(id);
          if (!row) continue; // skip jika ID tidak ditemukan

          let label = "", cssClass = "";

          if (info.custom && customStatuses[info.custom]) {
            label = customStatuses[info.custom].label;
            cssClass = customStatuses[info.custom].class;
          } else {
            if (info.status === 'online') {
              label = 'üü¢ Online';
              cssClass = 'up';
              if (info.ssl === 'invalid') label += ' ‚ö†Ô∏è SSL';
            } else {
              label = 'üî¥ Offline';
              cssClass = 'down';
            }
          }

          row.querySelector('.status').innerText = label;
          row.querySelector('.status').className = `status ${cssClass}`;
        }
      } catch (err) {
        container.innerHTML += `<div style="color: red;">Gagal ambil status üò¢</div>`;
        console.error(err);
      }
    };

    // Jalankan
    renderInitialList();
    updateStatuses();
  </script>
</body>
</html>
